# 小智Alarm

在小智AI上面进行的改版, 添加了一个可以语音控制的闹钟功能

> 测试阶段!!! 只实现基础功能, 稳定性待定 !!! 不要用于重要信息的提醒
>
> 只在c3的板子实现, 其他板子没有, 可以自己在对应的board文件里面添加iot模块即可

## 实现

### 闹钟部分

首先闹钟部分最重要的是到时间以后进行提醒, 我这里使用的实现方式是计算所有的时钟里面会最先响应的那一个, 然后使用esp32的时钟在一定时间以后进入回调函数, 回调函数中显示一下注册时候的时钟的名字, 同时开始播放本地的音频(目前是那个6的语音)

同时考虑到这个闹钟可能在运行到一半的时候断电, 所以需要在再次开机的时候可以恢复运行, esp32的nvs可以实现这个功能, 小智的代码里面把他抽象为Setting这个组件, 所以在时钟开启、插入、删除的时候会同步更新一下nvs, 这样可以在下一次上电的时候获取到之前的时钟运行情况

使用这种方式的时候时间就不可以是相对时间, 所以我使用最新版的小智获取的时间作为基准时间, 加上时间差值作为每一个闹钟的响应时间, 由于有的模型不可以获取时间, 所以实际控制的时候告诉他相对时间的效果会更好(示例: 十分钟后提醒我吃饭)

### 语音控制

使用小智的iot部分代码, 添加一个thing模块

